<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1022" />
  <title>ARGUS SPEAK LAB-X</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./assets/icon-192.png">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="bg"></div>
  <div class="noise"></div>

  <header class="topbar">
    <div class="brand">
      <div class="brand__badge" id="brandBadge" aria-hidden="true">
        <img class="brand__icon" src="./assets/icon-192.png" alt="" />
      </div>
      <div class="brand__text">
        <div class="brand__name">ARGUS SPEAK <span class="labx">LAB‚ÄëX</span></div>
        <div class="brand__tag">Aprende ingl√©s con IA. R√°pido. Real. Brutal.</div>
      </div>
    </div>

    <div class="topbar__actions">
      <div class="voiceSwitch" title="Voz del lector">
        <span class="voiceSwitch__label">Voz</span>
        <button id="voiceFemale" class="voiceSwitch__btn" data-gender="female" aria-pressed="true">Femenino</button>
        <button id="voiceMale" class="voiceSwitch__btn" data-gender="male" aria-pressed="false">Masculino</button>
      </div>

      <div class="voiceExact" title="Elige una voz exacta (opcional)">
        <span class="voiceExact__label">Voz exacta</span>
        <select id="voiceExactSelect" class="select select--compact" aria-label="Voz exacta"></select>
        <button id="btnTestVoice" class="btn btn--ghost btn--mini" title="Probar voz">üîä</button>
      </div>

      <button id="btnInstall" class="btn btn--ghost" title="Instalar">Instalar</button>
      <button id="btnCheckAI" class="btn btn--primary" title="Probar IA">Probar IA</button>
    
      <div class="planPill" id="planPill" title="Estado de suscripci√≥n">FREE</div>
      <button id="btnAccount" class="btn btn--ghost" title="Cuenta y suscripci√≥n">Cuenta</button>
</div>
  </header>

  <main class="shell">
    <nav class="tabs" aria-label="Navegaci√≥n">
      <button class="tab is-active" data-view="home">Inicio</button>
      <button class="tab" data-view="article">Art√≠culo</button>
      <button class="tab" data-view="vocab">Vocab</button>
      <button class="tab" data-view="daily">10/D√≠a</button>
    </nav>

    <!-- HOME -->
    <section class="view is-active" id="view-home">
      <div class="grid2">
        <section class="card card--hero">
          <div class="card__title">Modo lectura instant√°nea</div>
          <div class="card__subtitle">Toca una palabra para ver traducci√≥n, uso y pronunciaci√≥n con IA.</div>

          <div class="reader">
            <div class="reader__toolbar">
              <button id="btnReadDemo" class="btn btn--soft">üîä Leer texto</button>
              <button id="btnClearSelection" class="btn btn--ghost">Limpiar</button>
            </div>
            <div class="reader__text" id="demoText"></div>
          </div>
        </section>

        <section class="card">
          <div class="card__title">Comandos r√°pidos (IA)</div>
          <div class="card__subtitle">Sin ‚Äúfrases m√°gicas‚Äù. T√∫ mandas.</div>

          <div class="stack">
            <label class="field">
              <span>Pregunta sobre el texto / palabra / gram√°tica</span>
              <textarea id="quickAsk" placeholder="Ej: Explica este p√°rrafo como si tuviera 12 a√±os..."></textarea>
            </label>
            <div class="row">
              <button id="btnAskAI" class="btn btn--primary">Preguntar</button>
              <button id="btnExplainSentence" class="btn btn--ghost">Explicar oraci√≥n seleccionada</button>
            </div>

            <div class="output" id="quickOutput" hidden></div>
          </div>
        </section>
      </div>
    </section>

    <!-- ARTICLE -->
    <section class="view" id="view-article">
      <section class="card card--wide">
        <div class="card__title">Pega cualquier art√≠culo en ingl√©s</div>
        <div class="card__subtitle">Lo convierto en un ‚Äúcampo de entrenamiento‚Äù: palabras tocables + IA.</div>

        <div class="grid2">
          <div class="stack">
            <label class="field">
              <span>Art√≠culo (ingl√©s)</span>
              <textarea id="articleInput" placeholder="Pega aqu√≠ tu art√≠culo en ingl√©s..."></textarea>
            </label>
            <div class="row">
              <button id="btnRenderArticle" class="btn btn--primary">Preparar lectura</button>
              <button id="btnReadArticle" class="btn btn--soft">üîä Leer</button>
              <button id="btnSummarize" class="btn btn--ghost">Resumen (IA)</button>
              <button id="btnClearArticle" class="btn btn--ghost">Limpiar</button>
            </div>
            <div class="hint">Tip: toca una palabra para abrir el panel de ‚ÄúWord Intel‚Äù.</div>
          </div>

          <div class="stack">
            <div class="panel">
              <div class="panel__title">Word Intel</div>
              <div class="panel__body" id="wordPanelBody">
                <div class="muted">Toca una palabra para ver:</div>
                <ul class="muted">
                  <li>Traducci√≥n y significado real</li>
                  <li>Pronunciaci√≥n (IPA + gu√≠a simple)</li>
                  <li>Uso en 2 ejemplos: formal y casual</li>
                  <li>Sin√≥nimos y advertencias t√≠picas</li>
                </ul>
              </div>
              <div class="panel__actions">
                <button id="btnSpeakWord" class="btn btn--soft" disabled>üîä Pronunciar</button>
                <button id="btnQuizWord" class="btn btn--ghost" disabled>Mini‚Äëquiz</button>
              </div>
            </div>
          </div>
        </div>

        <div class="reader reader--article">
          <div class="reader__text" id="articleRendered"></div>
        </div>
      </section>
    </section>

    <!-- VOCAB -->
    <section class="view" id="view-vocab">
      <section class="card card--wide">
        <div class="card__title">Vocabulario ‚Äúvida real‚Äù</div>
        <div class="card__subtitle">Guarda palabras y rep√°salas cuando t√∫ quieras.</div>

        <div class="row">
          <button id="btnSaveSelected" class="btn btn--primary">Guardar palabra seleccionada</button>
          <button id="btnClearSaved" class="btn btn--ghost">Borrar lista</button>
        </div>

        <div class="saved" id="savedList"></div>
      </section>
    </section>

    <!-- DAILY -->
    <section class="view" id="view-daily">
      <section class="card card--wide">
        <div class="card__title">10 palabras diarias (IA)</div>
        <div class="card__subtitle">Tema ‚Üí 10 palabras ‚Üí pr√°ctica con ‚ÄúOK / vuelve a intentar‚Äù.</div>

        <div class="row">
          <select id="dailyTopic" class="select">
            <option value="work">Trabajo</option>
            <option value="daily">Conversaci√≥n diaria</option>
            <option value="travel">Viaje</option>
            <option value="business">Negocios</option>
            <option value="auto">Automotriz</option>
          </select>
          <button id="btnGenerateDaily" class="btn btn--primary">Generar 10</button>
          <button id="btnResetDaily" class="btn btn--ghost">Reiniciar</button>
        </div>

        <div class="dailyGrid" id="dailyGrid"></div>
      </section>
    </section>

  </main>

  <!-- BOTTOM SHEET -->
  <div class="sheet" id="sheet" aria-hidden="true">
    <div class="sheet__backdrop" id="sheetBackdrop"></div>
    <div class="sheet__card">
      <div class="sheet__head">
        <div>
          <div class="sheet__word" id="sheetWord">‚Äî</div>
          <div class="sheet__meta" id="sheetMeta">Toca una palabra en el texto</div>
        </div>
        <button class="btn btn--ghost" id="sheetClose">Cerrar</button>
      </div>
      <div class="sheet__body" id="sheetBody"></div>
      <div class="sheet__foot">
        <button class="btn btn--soft" id="sheetSpeak">üîä Pronunciar</button>
        <button class="btn btn--primary" id="sheetSave">Guardar</button>
      </div>
    </div>
  </div>

  
  <!-- ACCOUNT / SUBSCRIPTION MODAL -->
  <div class="modal" id="accountModal" hidden>
    <div class="modal__backdrop" id="accountBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="accountTitle">
      <div class="modal__head">
        <div>
          <div class="modal__title" id="accountTitle">Cuenta & Suscripci√≥n</div>
          <div class="modal__sub" id="accountEmail">Invitado</div>
        </div>
        <button class="btn btn--ghost btn--mini" id="btnAccountClose" title="Cerrar">‚úï</button>
      </div>
      <div class="modal__body">
        <div class="field">
          <label for="authEmail">Email</label>
          <input id="authEmail" type="email" placeholder="tu@correo.com" autocomplete="email" inputmode="email" />
          <div class="muted small">Te mandamos un link m√°gico para entrar (sin contrase√±as).</div>
        </div>

          <div class="field" id="otpField" hidden>
            <label for="authCode">C√≥digo (6 d√≠gitos)</label>
            <input id="authCode" type="text" placeholder="123456" inputmode="numeric" autocomplete="one-time-code" maxlength="6" />
            <div class="muted small">Opci√≥n recomendada en celular: te llega un c√≥digo y lo pegas aqu√≠, sin salir de la app.</div>
          </div>

        <div class="row row--tight">
          <button class="btn btn--primary" id="btnSendLink">Enviar link</button>
          <button class="btn btn--soft" id="btnSendCode">Enviar c√≥digo</button>
          <button class="btn btn--primary" id="btnVerifyCode" hidden>Verificar</button>
          <button class="btn btn--ghost" id="btnLogout" hidden>Salir</button>
        </div>

        <div class="hr"></div>

        <div class="planBox">
          <div class="planBox__title">Plan PRO</div>
          <div class="planBox__desc">Desbloquea IA y herramientas premium. Cancela cuando quieras.</div>
          <div class="row row--tight">
            <button class="btn btn--primary" id="btnSubscribe">Suscribirme</button>
            <button class="btn btn--ghost" id="btnManage" hidden>Gestionar</button>
          </div>
          <div class="muted small" id="billingMsg"></div>
        </div>

        <div class="muted small" id="authMsg"></div>
        <div class="hr"></div>
        <div class="row row--tight">
          <button class="btn btn--ghost" id="btnResetApp" title="Soluciona cach√© atascado">Reset app (cach√©)</button>
        </div>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  
  <script>
    // Fallback CDN (in case jsdelivr is blocked)
    (function(){
      function load(src){
        var s=document.createElement('script');
        s.src=src; s.async=false;
        document.head.appendChild(s);
      }
      if(!window.supabase){
        load("https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.min.js");
      }
    })();
  </script>
<script src="./app.js"></script>
</body>
</html>
